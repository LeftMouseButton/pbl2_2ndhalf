<html>
    <head>
        <meta charset="utf-8">
        
            <script src="lib/bindings/utils.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 850px;
                 background-color: #0d1117;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body>

<style id="themeStyles">
body {
  background-color: #0d1117;
  color: #ddd;
}
#legend {
  background: rgba(0,0,0,0.85);
  border-color: #444;
  color: #fff;
}
#searchBox {
  background: #222;
  color: #eee;
  border-color: #555;
}
#darkLightToggle {
  background: #222;
  color: #eee;
  border-color: #555;
}
</style>


<h1 style="
    text-align:center;
    color:#ddd;
    font-family:Arial, sans-serif;
    margin-top:20px;
">
Enhanced SomeTestingName Knowledge Graph
</h1>

        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "hoshimachi_suisei", "label": "Hoshimachi Suisei", "physics": true, "shape": "dot", "size": 25, "title": "Hoshimachi Suisei\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=0", "type": "vtuber", "x": 143.4089356297717, "y": 127.23995790244696}, {"color": "#1f77b4", "font": {"color": "#eeeeee"}, "id": "hololive_production", "label": "Hololive Production", "physics": true, "shape": "dot", "size": 25, "title": "Hololive Production\u003cbr\u003etype=agency\u003cbr\u003ecommunity=13", "type": "agency", "x": -117.54541279914257, "y": -38.66501725696602}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "inonaka_music", "label": "INoNaKa Music", "physics": true, "shape": "dot", "size": 25, "title": "INoNaKa Music\u003cbr\u003etype=music_label\u003cbr\u003ecommunity=0", "type": "music_label", "x": 117.2968771453641, "y": 18.890153944276275}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "next_color_planet", "label": "Next Color Planet", "physics": true, "shape": "dot", "size": 25, "title": "Next Color Planet\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 45.95529546217773, "y": 133.60514059118162}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "ghost", "label": "Ghost", "physics": true, "shape": "dot", "size": 25, "title": "Ghost\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 85.18074180324183, "y": 152.18592334314647}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "still_still_stellar", "label": "Still Still Stellar", "physics": true, "shape": "dot", "size": 25, "title": "Still Still Stellar\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 93.1061931600361, "y": 196.6750385493954}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "budokan", "label": "Budokan", "physics": true, "shape": "dot", "size": 25, "title": "Budokan\u003cbr\u003etype=\u003cbr\u003ecommunity=0", "type": "", "x": 287.13876953023254, "y": 99.60472751716993}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "comet", "label": "Comet", "physics": true, "shape": "dot", "size": 25, "title": "Comet\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 125.80620624303468, "y": 61.77787073237652}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "tenky\u016b_suisei_wa_yoru_o_mataide", "label": "Tenky\u016b, Suisei wa Yoru o Mataide", "physics": true, "shape": "dot", "size": 25, "title": "Tenky\u016b, Suisei wa Yoru o Mataide\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 61.65849796178203, "y": 87.13786565502127}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "azki", "label": "AZKi", "physics": true, "shape": "dot", "size": 25, "title": "AZKi\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=0", "type": "vtuber", "x": 187.29144618748816, "y": 54.83729994285913}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "cover_corp", "label": "Cover Corp.", "physics": true, "shape": "dot", "size": 25, "title": "Cover Corp.\u003cbr\u003etype=company\u003cbr\u003ecommunity=1", "type": "company", "x": 416.63112376678646, "y": -930.7217500495971}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "toyosu_pit", "label": "Toyosu PIT", "physics": true, "shape": "dot", "size": 25, "title": "Toyosu PIT\u003cbr\u003etype=location\u003cbr\u003ecommunity=2", "type": "location", "x": -620.8707853716278, "y": -693.2213611491879}, {"color": "#ff7f0e", "font": {"color": "#eeeeee"}, "id": "hololive_1st_fes_nonstop_story", "label": "Hololive 1st fes. Nonstop Story", "physics": true, "shape": "dot", "size": 25, "title": "Hololive 1st fes. Nonstop Story\u003cbr\u003etype=event\u003cbr\u003ecommunity=0", "type": "event", "x": 157.8250259921396, "y": 266.74951441062063}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "bluerose__comet", "label": "Bluerose / Comet", "physics": true, "shape": "dot", "size": 25, "title": "Bluerose / Comet\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 35.81776025493037, "y": 190.63277693276996}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "kakero__tenky\u016b_suisei_wa_yoru_o_mataide", "label": "Kakero / Tenky\u016b, Suisei wa Yoru o Mataide", "physics": true, "shape": "dot", "size": 25, "title": "Kakero / Tenky\u016b, Suisei wa Yoru o Mataide\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 255.87596360988286, "y": 25.069316510625068}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "jibun_katte_dazzling__bye_bye_rainy", "label": "Jibun Katte Dazzling / Bye Bye Rainy", "physics": true, "shape": "dot", "size": 25, "title": "Jibun Katte Dazzling / Bye Bye Rainy\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 281.24277802461785, "y": 63.903366680442524}, {"color": "#ff7f0e", "font": {"color": "#eeeeee"}, "id": "stellar_into_the_galaxy", "label": "STELLAR into the GALAXY", "physics": true, "shape": "dot", "size": 25, "title": "STELLAR into the GALAXY\u003cbr\u003etype=event\u003cbr\u003ecommunity=0", "type": "event", "x": 80.39003248340136, "y": 244.21258115607014}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "inui_toko", "label": "Inui Toko", "physics": true, "shape": "dot", "size": 25, "title": "Inui Toko\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=0", "type": "vtuber", "x": 253.93703937741924, "y": 222.34729589493742}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "midnight_grand_orchestra", "label": "Midnight Grand Orchestra", "physics": true, "shape": "dot", "size": 25, "title": "Midnight Grand Orchestra\u003cbr\u003etype=music_group\u003cbr\u003ecommunity=3", "type": "music_group", "x": 187.10415836825624, "y": -92.21793666277685}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "taku_inoue", "label": "Taku Inoue", "physics": true, "shape": "dot", "size": 25, "title": "Taku Inoue\u003cbr\u003etype=person\u003cbr\u003ecommunity=3", "type": "person", "x": 249.353544102809, "y": -187.5342811407819}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "toys_factory", "label": "Toy\u0027s Factory", "physics": true, "shape": "dot", "size": 25, "title": "Toy\u0027s Factory\u003cbr\u003etype=company\u003cbr\u003ecommunity=3", "type": "company", "x": 198.50691969544226, "y": -223.04102709706262}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "sos", "label": "SOS", "physics": true, "shape": "dot", "size": 25, "title": "SOS\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=3", "type": "music_release", "x": 173.25695205501208, "y": -200.71723452800367}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "the_first_take", "label": "The First Take", "physics": true, "shape": "dot", "size": 25, "title": "The First Take\u003cbr\u003etype=channel\u003cbr\u003ecommunity=0", "type": "channel", "x": 123.2442496743794, "y": 237.830572339876}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "stellar_stellar", "label": "Stellar Stellar", "physics": true, "shape": "dot", "size": 25, "title": "Stellar Stellar\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 189.80486948143295, "y": 180.682051994271}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "specter", "label": "Specter", "physics": true, "shape": "dot", "size": 25, "title": "Specter\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 234.1570797208438, "y": 56.62086337717554}, {"color": "#ff7f0e", "font": {"color": "#eeeeee"}, "id": "shout_in_crisis", "label": "Shout in Crisis", "physics": true, "shape": "dot", "size": 25, "title": "Shout in Crisis\u003cbr\u003etype=event\u003cbr\u003ecommunity=0", "type": "event", "x": 173.97150653128594, "y": 228.57536660833466}, {"color": "#d62728", "font": {"color": "#eeeeee"}, "id": "bibbidiba", "label": "Bibbidiba", "physics": true, "shape": "dot", "size": 25, "title": "Bibbidiba\u003cbr\u003etype=music_release\u003cbr\u003ecommunity=0", "type": "music_release", "x": 212.24140636584494, "y": 250.05618320935224}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "spectra_of_nova", "label": "Spectra of Nova", "physics": true, "shape": "dot", "size": 25, "title": "Spectra of Nova\u003cbr\u003etype=\u003cbr\u003ecommunity=4", "type": "", "x": -35.93927943727198, "y": 275.5353685847746}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hoshimatic_project", "label": "Hoshimatic Project", "physics": true, "shape": "dot", "size": 25, "title": "Hoshimatic Project\u003cbr\u003etype=music_group\u003cbr\u003ecommunity=4", "type": "music_group", "x": -129.5221574738381, "y": 355.73377356927733}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "kaf", "label": "KAF", "physics": true, "shape": "dot", "size": 25, "title": "KAF\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=4", "type": "vtuber", "x": -91.19116135111157, "y": 382.8266136416714}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "shiranui_constructions", "label": "Shiranui Constructions", "physics": true, "shape": "dot", "size": 25, "title": "Shiranui Constructions\u003cbr\u003etype=music_group\u003cbr\u003ecommunity=4", "type": "music_group", "x": -146.77684090548726, "y": 314.46203577048647}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "udagawach\u014d", "label": "Udagawach\u014d", "physics": true, "shape": "dot", "size": 25, "title": "Udagawach\u014d\u003cbr\u003etype=location\u003cbr\u003ecommunity=0", "type": "location", "x": 257.12046244065874, "y": 149.89173235113046}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "shibuya", "label": "Shibuya", "physics": true, "shape": "dot", "size": 25, "title": "Shibuya\u003cbr\u003etype=location\u003cbr\u003ecommunity=5", "type": "location", "x": -870.9497303427368, "y": 207.19602342343555}, {"color": "#ff7f0e", "font": {"color": "#eeeeee"}, "id": "countdown_japan_2425", "label": "Countdown Japan 24/25", "physics": true, "shape": "dot", "size": 25, "title": "Countdown Japan 24/25\u003cbr\u003etype=event\u003cbr\u003ecommunity=6", "type": "event", "x": 132.0917791657316, "y": 346.25287931012474}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "zutomayo", "label": "Zutomayo", "physics": true, "shape": "dot", "size": 25, "title": "Zutomayo\u003cbr\u003etype=music_artist\u003cbr\u003ecommunity=6", "type": "music_artist", "x": 152.40280771914027, "y": 470.2982114852284}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "sumika", "label": "Sumika", "physics": true, "shape": "dot", "size": 25, "title": "Sumika\u003cbr\u003etype=music_artist\u003cbr\u003ecommunity=6", "type": "music_artist", "x": 99.88712053015533, "y": 467.05724003823093}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "youtube_fanfest_2024", "label": "YouTube Fanfest 2024", "physics": true, "shape": "dot", "size": 25, "title": "YouTube Fanfest 2024\u003cbr\u003etype=\u003cbr\u003ecommunity=7", "type": "", "x": -17.79598979925316, "y": 66.94491066716161}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hajime_syacho", "label": "Hajime Syacho", "physics": true, "shape": "dot", "size": 25, "title": "Hajime Syacho\u003cbr\u003etype=youtuber\u003cbr\u003ecommunity=7", "type": "youtuber", "x": -125.57954183530242, "y": 74.54338006593011}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hikakin", "label": "Hikakin", "physics": true, "shape": "dot", "size": 25, "title": "Hikakin\u003cbr\u003etype=youtuber\u003cbr\u003ecommunity=7", "type": "youtuber", "x": -74.49493413959986, "y": -11.162719340422843}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "nippon_budokan", "label": "Nippon Budokan", "physics": true, "shape": "dot", "size": 25, "title": "Nippon Budokan\u003cbr\u003etype=location\u003cbr\u003ecommunity=0", "type": "location", "x": 160.3669305935951, "y": 3.1403010736395305}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "forbes_japan", "label": "Forbes Japan", "physics": true, "shape": "dot", "size": 25, "title": "Forbes Japan\u003cbr\u003etype=organization\u003cbr\u003ecommunity=0", "type": "organization", "x": 287.28827770508764, "y": 181.2467682430029}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hololive_presents_hoshimachi_suiseis_music_space", "label": "Hololive presents Hoshimachi Suisei\u0027s MUSIC SPACE", "physics": true, "shape": "dot", "size": 25, "title": "Hololive presents Hoshimachi Suisei\u0027s MUSIC SPACE\u003cbr\u003etype=radio_program\u003cbr\u003ecommunity=0", "type": "radio_program", "x": 207.86000261640876, "y": 8.753369600396443}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "nippon_cultural_broadcasting", "label": "Nippon Cultural Broadcasting", "physics": true, "shape": "dot", "size": 25, "title": "Nippon Cultural Broadcasting\u003cbr\u003etype=company\u003cbr\u003ecommunity=8", "type": "company", "x": -203.1076879973869, "y": -921.6498112797234}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "encouraging_japan_with_music", "label": "Encouraging Japan with Music!", "physics": true, "shape": "dot", "size": 25, "title": "Encouraging Japan with Music!\u003cbr\u003etype=radio_program\u003cbr\u003ecommunity=9", "type": "radio_program", "x": 306.368570985566, "y": 285.19020393646485}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "mokota_mememe", "label": "Mokota Mememe", "physics": true, "shape": "dot", "size": 25, "title": "Mokota Mememe\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=9", "type": "vtuber", "x": 412.7506983414591, "y": 353.6058766809308}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "hanabasami_ky\u014d", "label": "Hanabasami Ky\u014d", "physics": true, "shape": "dot", "size": 25, "title": "Hanabasami Ky\u014d\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=9", "type": "vtuber", "x": 374.34597540935783, "y": 391.3834783055326}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hoshimachi_suisei__tadokoro_azusas_parallel_scramble", "label": "Hoshimachi Suisei \u0026 Tadokoro Azusa\u0027s Parallel Scramble", "physics": true, "shape": "dot", "size": 25, "title": "Hoshimachi Suisei \u0026 Tadokoro Azusa\u0027s Parallel Scramble\u003cbr\u003etype=radio_program\u003cbr\u003ecommunity=0", "type": "radio_program", "x": 233.49416510819017, "y": 191.2408764376337}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "azusa_tadokoro", "label": "Azusa Tadokoro", "physics": true, "shape": "dot", "size": 25, "title": "Azusa Tadokoro\u003cbr\u003etype=person\u003cbr\u003ecommunity=0", "type": "person", "x": 234.10981357845668, "y": 108.28910951854408}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "school_of_lock_music_line", "label": "SCHOOL OF LOCK! Music Line", "physics": true, "shape": "dot", "size": 25, "title": "SCHOOL OF LOCK! Music Line\u003cbr\u003etype=radio_program\u003cbr\u003ecommunity=0", "type": "radio_program", "x": 298.5661994542632, "y": 135.33222394376747}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "vr_vtuber_music_radio", "label": "VR! ~VTuber Music Radio~", "physics": true, "shape": "dot", "size": 25, "title": "VR! ~VTuber Music Radio~\u003cbr\u003etype=radio_program\u003cbr\u003ecommunity=0", "type": "radio_program", "x": 71.71433096790528, "y": 35.58603440733652}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "usada_pekora", "label": "Usada Pekora", "physics": true, "shape": "dot", "size": 25, "title": "Usada Pekora\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=13", "type": "vtuber", "x": -356.60294320813273, "y": -187.94448715220668}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "hololive_fantasy", "label": "hololive Fantasy", "physics": true, "shape": "dot", "size": 25, "title": "hololive Fantasy\u003cbr\u003etype=group\u003cbr\u003ecommunity=10", "type": "group", "x": -422.98655173433747, "y": -361.43738852757}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "uruha_rushia", "label": "Uruha Rushia", "physics": true, "shape": "dot", "size": 25, "title": "Uruha Rushia\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=10", "type": "vtuber", "x": -393.87369490085507, "y": -447.6307937358721}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "houshou_marine", "label": "Houshou Marine", "physics": true, "shape": "dot", "size": 25, "title": "Houshou Marine\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=10", "type": "vtuber", "x": -477.4909971961747, "y": -444.8210808060761}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "shiranui_flare", "label": "Shiranui Flare", "physics": true, "shape": "dot", "size": 25, "title": "Shiranui Flare\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=10", "type": "vtuber", "x": -437.09603823417297, "y": -459.266518817957}, {"color": "#9467bd", "font": {"color": "#eeeeee"}, "id": "shirogane_noel", "label": "Shirogane Noel", "physics": true, "shape": "dot", "size": 25, "title": "Shirogane Noel\u003cbr\u003etype=vtuber\u003cbr\u003ecommunity=10", "type": "vtuber", "x": -508.24026436655555, "y": -412.60234879619}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "yuuki_hagure", "label": "Yuuki Hagure", "physics": true, "shape": "dot", "size": 25, "title": "Yuuki Hagure\u003cbr\u003etype=person\u003cbr\u003ecommunity=13", "type": "person", "x": -388.85408760267694, "y": -114.63971080677557}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "rariemonn", "label": "rariemonn", "physics": true, "shape": "dot", "size": 25, "title": "rariemonn\u003cbr\u003etype=person\u003cbr\u003ecommunity=13", "type": "person", "x": -440.3503329369963, "y": -121.28611102301109}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "momoko_tsugunaga", "label": "Momoko Tsugunaga", "physics": true, "shape": "dot", "size": 25, "title": "Momoko Tsugunaga\u003cbr\u003etype=idol\u003cbr\u003ecommunity=13", "type": "idol", "x": -315.41348212648506, "y": -258.4345280265059}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "berryz_kobo", "label": "Berryz Kobo", "physics": true, "shape": "dot", "size": 25, "title": "Berryz Kobo\u003cbr\u003etype=group\u003cbr\u003ecommunity=11", "type": "group", "x": 1000.0, "y": -134.21280010661104}, {"color": "#2ca02c", "font": {"color": "#eeeeee"}, "id": "dragon_quest_treasures", "label": "Dragon Quest Treasures", "physics": true, "shape": "dot", "size": 25, "title": "Dragon Quest Treasures\u003cbr\u003etype=game\u003cbr\u003ecommunity=12", "type": "game", "x": 545.6442918434196, "y": 840.5162599612665}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "pekotte", "label": "Pekotte", "physics": true, "shape": "dot", "size": 25, "title": "Pekotte\u003cbr\u003etype=character\u003cbr\u003ecommunity=13", "type": "character", "x": -363.49971670565475, "y": -268.4086020476298}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "human_rabbitality_project", "label": "Human Rabbitality Project", "physics": true, "shape": "dot", "size": 25, "title": "Human Rabbitality Project\u003cbr\u003etype=project\u003cbr\u003ecommunity=13", "type": "project", "x": -525.1369541372128, "y": -212.28218666478764}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "zenjinrui_usagika_keikaku", "label": "Zenjinrui Usagika Keikaku!", "physics": true, "shape": "dot", "size": 25, "title": "Zenjinrui Usagika Keikaku!\u003cbr\u003etype=single\u003cbr\u003ecommunity=13", "type": "single", "x": -413.6164762984063, "y": -178.3255457739776}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "milky", "label": "Milky", "physics": true, "shape": "dot", "size": 25, "title": "Milky\u003cbr\u003etype=brand\u003cbr\u003ecommunity=13", "type": "brand", "x": -632.4564791597197, "y": -202.90126214176726}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "bandai", "label": "Bandai", "physics": true, "shape": "dot", "size": 25, "title": "Bandai\u003cbr\u003etype=company\u003cbr\u003ecommunity=13", "type": "company", "x": -625.937606631565, "y": -253.2518060089977}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "1st_usada_pekolive__usagi_the_megami_", "label": "1st Usada PekoLive -USAGI the MEGAMI!!-", "physics": true, "shape": "dot", "size": 25, "title": "1st Usada PekoLive -USAGI the MEGAMI!!-\u003cbr\u003etype=solo live concert\u003cbr\u003ecommunity=13", "type": "solo live concert", "x": -409.90879719666515, "y": -256.84403114482996}, {"color": "#cccccc", "font": {"color": "#eeeeee"}, "id": "ariake_arena", "label": "Ariake Arena", "physics": true, "shape": "dot", "size": 25, "title": "Ariake Arena\u003cbr\u003etype=location\u003cbr\u003ecommunity=14", "type": "location", "x": 898.3946818392852, "y": -538.3521983844937}, {"color": "#2ca02c", "font": {"color": "#eeeeee"}, "id": "idol_showdown", "label": "Idol Showdown", "physics": true, "shape": "dot", "size": 25, "title": "Idol Showdown\u003cbr\u003etype=game\u003cbr\u003ecommunity=13", "type": "game", "x": -455.2003690565712, "y": -168.36159127423184}, {"color": "#2ca02c", "font": {"color": "#eeeeee"}, "id": "death_stranding_2_on_the_beach", "label": "Death Stranding 2: On the Beach", "physics": true, "shape": "dot", "size": 25, "title": "Death Stranding 2: On the Beach\u003cbr\u003etype=game\u003cbr\u003ecommunity=13", "type": "game", "x": -442.17116798135527, "y": -223.7264085643046}]);
                  edges = new vis.DataSet([{"color": "#888888", "from": "hoshimachi_suisei", "title": "affiliated_with", "to": "hololive_production", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "affiliated_with", "to": "inonaka_music", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "next_color_planet", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "ghost", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "still_still_stellar", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "dreamed_of_performing_at", "to": "budokan", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "comet", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "tenky\u016b_suisei_wa_yoru_o_mataide", "width": 2}, {"color": "#377eb8", "from": "hoshimachi_suisei", "title": "collaborated_with", "to": "azki", "width": 2}, {"color": "#984ea3", "from": "hoshimachi_suisei", "title": "performed_at", "to": "hololive_1st_fes_nonstop_story", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "bluerose__comet", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "kakero__tenky\u016b_suisei_wa_yoru_o_mataide", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "jibun_katte_dazzling__bye_bye_rainy", "width": 2}, {"color": "#984ea3", "from": "hoshimachi_suisei", "title": "performed_at", "to": "stellar_into_the_galaxy", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "guest_appearance", "to": "inui_toko", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "composed_of", "to": "midnight_grand_orchestra", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "performed_on", "to": "the_first_take", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "performed", "to": "stellar_stellar", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "specter", "width": 2}, {"color": "#984ea3", "from": "hoshimachi_suisei", "title": "performed_at", "to": "shout_in_crisis", "width": 2}, {"color": "#a65628", "from": "hoshimachi_suisei", "title": "released", "to": "bibbidiba", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "announced", "to": "spectra_of_nova", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "performed_in", "to": "udagawach\u014d", "width": 2}, {"color": "#984ea3", "from": "hoshimachi_suisei", "title": "performed_at", "to": "countdown_japan_2425", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "appeared_at", "to": "youtube_fanfest_2024", "width": 2}, {"color": "#984ea3", "from": "hoshimachi_suisei", "title": "performed_at", "to": "nippon_budokan", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "recognized_by", "to": "forbes_japan", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "hosted", "to": "hololive_presents_hoshimachi_suiseis_music_space", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "appeared_on", "to": "encouraging_japan_with_music", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "hosted", "to": "hoshimachi_suisei__tadokoro_azusas_parallel_scramble", "width": 2}, {"color": "#377eb8", "from": "hoshimachi_suisei", "title": "collaborated_with", "to": "azusa_tadokoro", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "appeared_on", "to": "school_of_lock_music_line", "width": 2}, {"color": "#888888", "from": "hoshimachi_suisei", "title": "appeared_on", "to": "vr_vtuber_music_radio", "width": 2}, {"color": "#888888", "from": "hololive_production", "title": "affiliated_with", "to": "usada_pekora", "width": 2}, {"color": "#888888", "from": "midnight_grand_orchestra", "title": "composed_of", "to": "taku_inoue", "width": 2}, {"color": "#888888", "from": "midnight_grand_orchestra", "title": "signed_to", "to": "toys_factory", "width": 2}, {"color": "#a65628", "from": "midnight_grand_orchestra", "title": "released", "to": "sos", "width": 2}, {"color": "#888888", "from": "spectra_of_nova", "title": "featured", "to": "hoshimatic_project", "width": 2}, {"color": "#888888", "from": "spectra_of_nova", "title": "featured", "to": "kaf", "width": 2}, {"color": "#888888", "from": "spectra_of_nova", "title": "featured", "to": "shiranui_constructions", "width": 2}, {"color": "#888888", "from": "countdown_japan_2425", "title": "featured", "to": "zutomayo", "width": 2}, {"color": "#888888", "from": "countdown_japan_2425", "title": "featured", "to": "sumika", "width": 2}, {"color": "#888888", "from": "youtube_fanfest_2024", "title": "featured", "to": "hajime_syacho", "width": 2}, {"color": "#888888", "from": "youtube_fanfest_2024", "title": "featured", "to": "hikakin", "width": 2}, {"color": "#888888", "from": "encouraging_japan_with_music", "title": "featured", "to": "mokota_mememe", "width": 2}, {"color": "#888888", "from": "encouraging_japan_with_music", "title": "featured", "to": "hanabasami_ky\u014d", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "member_of", "to": "hololive_fantasy", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "designed_by", "to": "yuuki_hagure", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "rigged_by", "to": "rariemonn", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "inspired_by", "to": "momoko_tsugunaga", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "based_on", "to": "pekotte", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "launched", "to": "human_rabbitality_project", "width": 2}, {"color": "#a65628", "from": "usada_pekora", "title": "released", "to": "zenjinrui_usagika_keikaku", "width": 2}, {"color": "#984ea3", "from": "usada_pekora", "title": "performed_at", "to": "1st_usada_pekolive__usagi_the_megami_", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "playable_character_in", "to": "idol_showdown", "width": 2}, {"color": "#888888", "from": "usada_pekora", "title": "cameo_in", "to": "death_stranding_2_on_the_beach", "width": 2}, {"color": "#888888", "from": "hololive_fantasy", "title": "member", "to": "uruha_rushia", "width": 2}, {"color": "#888888", "from": "hololive_fantasy", "title": "member", "to": "houshou_marine", "width": 2}, {"color": "#888888", "from": "hololive_fantasy", "title": "member", "to": "shiranui_flare", "width": 2}, {"color": "#888888", "from": "hololive_fantasy", "title": "member", "to": "shirogane_noel", "width": 2}, {"color": "#888888", "from": "human_rabbitality_project", "title": "collaboration", "to": "milky", "width": 2}, {"color": "#888888", "from": "human_rabbitality_project", "title": "collaboration", "to": "bandai", "width": 2}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {"physics": {"enabled": true, "barnesHut": {"gravitationalConstant": -5000, "centralGravity": 0.2, "springLength": 130, "springConstant": 0.02, "damping": 0.09, "avoidOverlap": 0}, "stabilization": {"enabled": true, "iterations": 300}}};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    
<!-- Dark/Light Toggle Button -->
<button id="darkLightToggle" style="
    position: fixed;
    top: 15px;
    right: 20px;
    z-index: 9999;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    background: #222;
    color: #eee;
    border: 1px solid #555;
">üåô Dark</button>

<div id="legend" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 0;
    background: rgba(0,0,0,0.85);
    border: 2px solid #444;
    border-radius: 10px;
    color: #fff;
    font-family: Arial, sans-serif;
    font-size: 12px;
    min-width: 260px;
    z-index: 9999;
    max-height: 450px;
">

    <div id="legendDragHandle" style="
        width: 100%;
        padding: 8px;
        background: rgba(255,255,255,0.05);
        border-bottom: 1px solid #555;
        cursor: grab;
        font-weight: bold;
        user-select: none;
    ">Legend</div>

    <div id="legendContent" style="padding:15px; max-height:380px; overflow:auto;">

        <div style="font-weight:bold; margin-bottom:10px;">Search Node</div>
        <input id="searchBox" placeholder="Type name‚Ä¶" style="
            width:95%;
            padding:6px;
            margin-bottom:12px;
            border-radius:5px;
            border:1px solid #555;
            background:#222;
            color:#eee;
        ">

        <div style="font-weight:bold; margin-bottom:10px;">Physics</div>
        <label style="display:block;margin-bottom:12px;cursor:pointer;">
            <input type="checkbox" id="physicsToggle" checked style="margin-right:6px;">
            <span>Enable physics (layout updates)</span>
        </label>

        <div style="font-weight:bold; margin-bottom:10px;">Node Types (Toggle)</div>
        <div id="nodeTypeControls"></div>

        <hr style="border-color:#666; margin:10px 0;">
        <div style="font-weight:bold; margin-bottom:10px;">Edge Types (Toggle)</div>
        <div id="edgeTypeControls"></div>
    </div>

    <div id="legendResizeHandle" style="
        position:absolute;
        width:14px;
        height:14px;
        bottom:2px;
        right:2px;
        cursor:se-resize;
        background:rgba(255,255,255,0.2);
        border-radius:3px;
    "></div>
</div>

<script>
// Helper: set canvas background to match theme
function applyGraphBackground(isDark) {
    var bg = isDark ? "#0d1117" : "#ffffff";
    var canvas = document.querySelector("canvas");
    if (canvas) {
        canvas.style.background = bg;
    }
}

// ======================================================================
// Node-type Filters (hide/show nodes only)
// ======================================================================
function addLegendControls() {
    if (typeof network === 'undefined') return setTimeout(addLegendControls, 200);

    var container = document.getElementById('nodeTypeControls');
    var allNodes = network.body.nodes;
    var typeColors = {};

    Object.values(allNodes).forEach(function(n) {
        var t = n.options.type || '';
        if (!typeColors[t]) {
            var col = (n.options.color && n.options.color.background)
                ? n.options.color.background
                : '#cccccc';
            typeColors[t] = col;
        }
    });

    Object.keys(typeColors).forEach(function(t) {
        var col = typeColors[t];
        var id = "toggle_" + t.replace(/[^a-zA-Z0-9]/g, '_');

        container.innerHTML += ''
            + '<label style="display:block;margin-bottom:6px;cursor:pointer;">'
            +   '<input type="checkbox" id="' + id + '" checked style="margin-right:6px;">'
            +   '<span style="color:' + col + '">' + t.replace(/_/g,' ') + '</span>'
            + '</label>';

        setTimeout(function() {
            var cb = document.getElementById(id);
            if (!cb) return;
            cb.onchange = function() {
                var visible = cb.checked;
                var nodeDS = network.body.data.nodes;
                var updates = [];

                // Batch updates to avoid repeated heavy work
                Object.values(network.body.nodes).forEach(function(n) {
                    if ((n.options.type || '') === t) {
                        updates.push({ id: n.id, hidden: !visible });
                    }
                });

                if (updates.length > 0) {
                    nodeDS.update(updates);
                }
                // No explicit redraw() here ‚Äì vis handles it efficiently
            };
        }, 50);
    });
}
setTimeout(addLegendControls, 300);


// ======================================================================
// Edge-type Filters (hide/show edges by type)
// ======================================================================
function addEdgeFilters() {
    if (typeof network === 'undefined') return setTimeout(addEdgeFilters, 200);

    var container = document.getElementById('edgeTypeControls');
    var allEdges = network.body.edges;
    var typeColors = {};

    Object.values(allEdges).forEach(function(e) {
        var t = e.options.title || '';
        if (!typeColors[t]) {
            var col = e.options.color || '#cccccc';
            var colStr = (typeof col === 'string') ? col : (col.color || '#cccccc');
            typeColors[t] = colStr;
        }
    });

    Object.keys(typeColors).forEach(function(etype) {
        var color = typeColors[etype];
        var id = "edge_toggle_" + etype.replace(/[^a-zA-Z0-9]/g, '_');

        container.innerHTML += ''
            + '<label style="display:block;margin-bottom:6px;cursor:pointer;">'
            +   '<input type="checkbox" id="' + id + '" checked style="margin-right:6px;">'
            +   '<span style="color:' + color + '">' + etype.replace(/_/g,' ') + '</span>'
            + '</label>';

        setTimeout(function() {
            var cb = document.getElementById(id);
            if (!cb) return;
            cb.onchange = function() {
                var visible = cb.checked;
                var edgeDS = network.body.data.edges;
                var updates = [];

                Object.values(allEdges).forEach(function(edge) {
                    if ((edge.options.title || '') === etype) {
                        updates.push({ id: edge.id, hidden: !visible });
                    }
                });

                if (updates.length > 0) {
                    edgeDS.update(updates);
                }
                // Again, rely on internal redraw
            };
        }, 50);
    });
}
setTimeout(addEdgeFilters, 350);


// ======================================================================
// Search Bar with highlight + auto-zoom
// ======================================================================
function setupSearchBar() {
    if (typeof network === 'undefined') return setTimeout(setupSearchBar, 200);

    var box = document.getElementById("searchBox");
    var allNodes = network.body.nodes;

    box.addEventListener("input", function() {
        var q = box.value.trim().toLowerCase();

        if (q === "") {
            Object.values(allNodes).forEach(function(n) {
                var orig = n.options._origColor || n.options.color;
                n.setOptions({ color: orig });
            });
            return;
        }

        var found = null;

        Object.values(allNodes).forEach(function(n) {
            var label = (n.options.label || "").toLowerCase();
            var idStr = String(n.id).toLowerCase();

            if (label.includes(q) || idStr.includes(q)) {
                found = n;
                n.setOptions({
                    _origColor: n.options.color,
                    color: { background:"#ffcc00", border:"#ffaa00" }
                });
            } else {
                n.setOptions({
                    _origColor: n.options.color,
                    color: { background:"#444", border:"#222" }
                });
            }
        });

        if (found) {
            network.focus(found.id, {
                scale: 1.2,
                animation: { duration: 500, easingFunction: "easeInOutQuad" }
            });
        }
    });
}
setTimeout(setupSearchBar, 300);


// ======================================================================
// Dark/Light Mode Toggle (including canvas background)
// ======================================================================
function setupDarkLightToggle() {
    var btn = document.getElementById("darkLightToggle");
    var styleTag = document.getElementById("themeStyles");
    var mode = "dark";

    // ensure initial canvas matches dark theme
    applyGraphBackground(true);

    btn.onclick = function() {
        if (mode === "dark") {
            mode = "light";
            btn.textContent = "‚òÄÔ∏è Light";
            styleTag.innerHTML = ''
                + 'body { background:#f4f4f4; color:#222; }'
                + '#legend { background:rgba(255,255,255,0.85);color:#222;border-color:#bbb; }'
                + '#searchBox { background:#fff;color:#000;border-color:#aaa; }'
                + '#darkLightToggle { background:#fff;color:#000;border-color:#aaa; }';
            applyGraphBackground(false);
        } else {
            mode = "dark";
            btn.textContent = "üåô Dark";
            styleTag.innerHTML = ''
                + 'body { background:#0d1117; color:#ddd; }'
                + '#legend { background:rgba(0,0,0,0.85);color:#fff;border-color:#444; }'
                + '#searchBox { background:#222;color:#eee;border-color:#555; }'
                + '#darkLightToggle { background:#222;color:#eee;border-color:#555; }';
            applyGraphBackground(true);
        }
    };
}
setTimeout(setupDarkLightToggle, 300);


// ======================================================================
// Physics Toggle Checkbox
// ======================================================================
function setupPhysicsToggle() {
    if (typeof network === 'undefined') return setTimeout(setupPhysicsToggle, 200);
    var cb = document.getElementById("physicsToggle");
    if (!cb) return;

    cb.onchange = function() {
        var enable = cb.checked;
        network.setOptions({ physics: { enabled: enable } });
    };
}
setTimeout(setupPhysicsToggle, 350);


// ======================================================================
// Disable physics after initial stabilization
// ======================================================================
function disablePhysicsAfterStabilization() {
    if (typeof network === 'undefined') {
        setTimeout(disablePhysicsAfterStabilization, 200);
        return;
    }
    network.once("stabilizationIterationsDone", function () {
        network.setOptions({ physics: { enabled: false } });
        var cb = document.getElementById("physicsToggle");
        if (cb) cb.checked = false;
    });
}
disablePhysicsAfterStabilization();


// ======================================================================
// DRAGGABLE + RESIZABLE LEGEND (with boundaries)
// ======================================================================
function setupLegendDragResize() {
    var legend = document.getElementById("legend");
    var handle = document.getElementById("legendDragHandle");
    var resize = document.getElementById("legendResizeHandle");
    if (!legend || !handle || !resize) return;

    // Dragging
    var dragging = false, offsetX = 0, offsetY = 0;

    handle.addEventListener("mousedown", function(e) {
        dragging = true;
        handle.style.cursor = "grabbing";
        var rect = legend.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
    });

    document.addEventListener("mousemove", function(e) {
        if (!dragging) return;
        var vw = window.innerWidth;
        var vh = window.innerHeight;
        var rect = legend.getBoundingClientRect();

        var left = e.clientX - offsetX;
        var top = e.clientY - offsetY;

        left = Math.max(0, Math.min(left, vw - rect.width));
        top = Math.max(0, Math.min(top, vh - rect.height));

        legend.style.left = left + "px";
        legend.style.top = top + "px";
        legend.style.right = "auto";
        legend.style.bottom = "auto";
        legend.style.position = "fixed";
    });

    document.addEventListener("mouseup", function() {
        dragging = false;  // FIX: JS boolean
        handle.style.cursor = "grab";
    });

    // Resizing
    var resizing = false, startW = 0, startH = 0, startX = 0, startY = 0;

    resize.addEventListener("mousedown", function(e) {
        e.preventDefault();
        resizing = true;
        var rect = legend.getBoundingClientRect();
        startW = rect.width;
        startH = rect.height;
        startX = e.clientX;
        startY = e.clientY;
    });

    document.addEventListener("mousemove", function(e) {
        if (!resizing) return;

        var newW = Math.max(260, startW + (e.clientX - startX));
        var newH = Math.max(220, startH + (e.clientY - startY));

        legend.style.width = newW + "px";
        legend.style.height = newH + "px";

        var inner = document.getElementById("legendContent");
        inner.style.maxHeight = (newH - 60) + "px";
    });

    document.addEventListener("mouseup", function() {
        resizing = false;
    });
}
setTimeout(setupLegendDragResize, 400);
</script>

</body>
</html>